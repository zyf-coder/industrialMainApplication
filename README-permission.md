# 权限统一由code控制
- code 统一在在全局的global/code文件中管理

- 页面角度：涉及到权限的页面:
  - 左侧导航菜单
  - 首页常用功能、更多页面
- 路由角度：
  - 单个路由控制
  - 不同页面tab的控制（全局tab）
- 目前所有的详情页都不受权限控制
- 详细的什么权限对应哪些页面，欢迎大家去看代码 在`@/global/code/index`中
- 有什么疑问可以给我提问题（***当然并不建议***）

## 左侧导航菜单（页面角度）

- 例如

  ```javascript
  {

     // 跳转到的是事件中心的企业融资

     name: '产业投融资',

     code: [EVENT_BEYOND],

     routeLink: '占位',

     isNew: false,

     isHot: false,

    },
  ```

`当code和routeLink(跳转链接)同时存在时，才会进行权限校验，否则跳过校验（相当于直接通过）当我们建一个新的menuList时 只需要不写code就可以展示`

## 首页常用功能、更多页面（页面角度）

- 这个地方的数据是后端返回的 唯一和菜单对应上的只有name 所以以后加数据时 要保持name的一一对应才能进入到权限判断
- 如果name不同，则找不到对应的code 考虑到这里会有一些静态页面，所以当找不到时默认会展示出来

## 单个路由控制（路由角度）

- 在路由映射表中， 字段为meta下的code，是一个数组
- 只有数组中的code全部能找到是，才会判断该路由存在
- 当新建页面时，如果想要跳过权限认证，不在meta中写code即可
- 当前用户没有该路由权限时，会进入到404页面（个人认为不合理，应该进入到没有权限的单独页面）

## 不同页面tab的控制（路由角度）

- 由于历史遗留问题，不同页面的部分tab也会受到权限的控制
- 目前只有全局政策，涉及到的地方有：
  - menu-宏观-地区分析-区域政策、区域政策分析、区域政策比对
  - 产业-产业链图谱-产业政策tab
  - 产业-产业链地图-政策tab
  - 产业-产业链图谱-图谱弹窗上的产业政策（2.5d等）
  - ~~事件中心-政策~~（暂时没有关联全局政策，因为他有单独的路由，受路由权限管理，所以，如果要去掉一个人的全局政策时，要把事件中心的政策对应的权限也关掉）
  - ~~政策详情~~（目前一切的详情页都没有加入到权限管理中，所以这个**目前**不受全局政策控制）
  - 首页-常用功能/更多页
    - 于菜单是一一对应的（根据name，因为只有name才能关联上）
    - 如果要在这个地方在对应的东西的话，在菜单所对应的数据中也加上（或者自己建一个otherData的对象数组这样的数据，和菜单对应的数据合并起来进行判断也行）
